<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Biostar TV World</title>

<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
<meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">

<style>
body{margin:0;font-family:sans-serif;background:#0b1c2d;color:#fff}
header{display:flex;align-items:center;justify-content:space-between;padding:10px;background:#003366}
header h1{font-size:18px;margin:0}
#playerWrap{background:#000;padding:10px}
video{width:100%;border-radius:12px}
.tabs{display:flex;gap:8px;padding:10px;overflow-x:auto}
.tab{background:#1e3a5f;padding:6px 14px;border-radius:20px;white-space:nowrap}
.tab.active{background:#fff;color:#000}
.grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;padding:10px}
.card{background:#fff;border-radius:16px;padding:10px;text-align:center;color:#000;cursor:pointer}
.card img{width:20px;height:20px;object-fit:contain}
</style>
</head>

<body>

<header><h1>Biostar TV World</h1></header>

<div id="playerWrap">
<video id="video" controls autoplay></video>
</div>

<div class="tabs">
<div class="tab active">All</div>
</div>

<div class="grid" id="channelGrid"></div>

<script>
var video = document.getElementById('video');
var hls;

function play(url){
 if(hls){hls.destroy();}
 if(Hls.isSupported()){
  hls = new Hls({
    xhrSetup: function(xhr){
      xhr.setRequestHeader('User-Agent','Mozilla/5.0');
      xhr.setRequestHeader('Referer','https://google.com');
    }
  });
  hls.loadSource(url);
  hls.attachMedia(video);
 } else {
  video.src = url;
 }
}

async function loadPlaylist() {
 try {
  let res = await fetch('https://raw.githubusercontent.com/abusaeeidx/IPTV-Scraper-Zilla/refs/heads/main/BD.m3u');
  let text = await res.text();
  let lines = text.split('\n');
  let grid = document.getElementById('channelGrid');

  for(let i=0; i<lines.length; i++){
    if(lines[i].startsWith('#EXTINF')){
      let name = lines[i].split(',')[1] || 'Channel';
      let url = lines[i+1];
      let card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `<img src="https://via.placeholder.com/20"><br>${name}`;
      card.onclick = function(){ play(url); };
      grid.appendChild(card);
    }
  }
 } catch(err){
  console.log('Playlist load error', err);
 }
}

loadPlaylist();
</script>

</body>
</html>
